{"mappings":"AAiBO,SAASA,EAAgBC,GAG9B,OAAOC,MAFK,wDAA8BD,KAExBE,MAAKC,IACrB,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAGvB,OAAOH,EAAKI,MAAM,G,CCtBtB,MAAMC,EAAO,CACXC,YAAaC,SAASC,cAAc,iBACpCC,QAASF,SAASC,cAAc,aAChCE,OAAQH,SAASC,cAAc,WAC/BG,MAAOJ,SAASC,cAAc,WAGhC,IAAII,GAAe,EAmBnB,SAASC,EAAaC,GACpB,OAAOA,EACJC,KAAI,EAACC,GAAEA,EAAEC,KAAEA,KACH,iBAAiBD,KAAMC,eAE/BC,KAAK,G,CAtBVb,EAAKC,YAAYa,iBAAiB,SAyBlC,WACEP,GAAe,C,IAzBjBP,EAAKC,YAAYa,iBAAiB,UA4BlC,SAAuBC,GACrB,IAAKR,EAAc,CAGjBhB,EAFgBwB,EAAEC,OAAOC,OAGtBvB,MAAKe,IACJS,QAAQC,IAAIV,GAEZ,MACMW,EAAS,aADIX,EAAK,GAAGY,yBAG3BrB,EAAKI,QAAQkB,UAAYF,CAAM,IAEhCG,OAAMC,GAAON,QAAQC,IAAIK,I,KDhDvB/B,MANQ,sCAMQ,CACrBgC,QAAS,CAAE,YAJb,2EAKG/B,MAAKC,IACN,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAGvB,OAAOH,EAAKI,MAAM,ICGnBL,MAAKe,IACJS,QAAQC,IAAIV,GAERA,IACFT,EAAKK,OAAOqB,YAAc,GAC1B1B,EAAKM,MAAMoB,YAAc,GAEzBlB,EAAaC,GACbT,EAAKC,YAAY0B,mBAAmB,YAAanB,EAAaC,I,IAGjEc,OAAMC,GAAON,QAAQC,IAAIK","sources":["src/js/cat-api.js","src/js/index.js"],"sourcesContent":["const BASE_URL = 'https://api.thecatapi.com/v1/breeds';\nconst FULL_INFO_URL = 'https://api.thecatapi.com/v1/images/search';\nconst API_KEY =\n  'live_h4rXP6k712FItPzlv4CzVENgeHJjXm6PhC2qqHs9ALeUyqOD7G0DJszHUDH4miQN';\n\nexport function fetchBreeds() {\n  return fetch(BASE_URL, {\n    headers: { 'x-api-key': API_KEY },\n  }).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n\nexport function fetchCatByBreed(breedId) {\n  const URL = `${FULL_INFO_URL}?breed_ids=${breedId}`;\n\n  return fetch(URL).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n","import { fetchBreeds } from './cat-api';\nimport { fetchCatByBreed } from './cat-api';\n\nconst refs = {\n  breedSelect: document.querySelector('.breed-select'),\n  catInfo: document.querySelector('.cat-info'),\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n};\n\nlet isFirstClick = true;\n\nrefs.breedSelect.addEventListener('click', onClickBreedSelect);\nrefs.breedSelect.addEventListener('change', onSelectBreed);\n\nfetchBreeds()\n  .then(data => {\n    console.log(data);\n\n    if (data) {\n      refs.loader.textContent = '';\n      refs.error.textContent = '';\n\n      createMarkup(data);\n      refs.breedSelect.insertAdjacentHTML('beforeend', createMarkup(data));\n    }\n  })\n  .catch(err => console.log(err));\n\nfunction createMarkup(data) {\n  return data\n    .map(({ id, name }) => {\n      return `<option value=${id}>${name}</option>`;\n    })\n    .join('');\n}\n\nfunction onClickBreedSelect() {\n  isFirstClick = false;\n}\n\nfunction onSelectBreed(e) {\n  if (!isFirstClick) {\n    const breedId = e.target.value;\n\n    fetchCatByBreed(breedId)\n      .then(data => {\n        console.log(data);\n\n        const urlPicture = data[0].url;\n        const markup = `<img src=\"${urlPicture}\" alt=\"cat\"\"></img>`;\n\n        refs.catInfo.innerHTML = markup;\n      })\n      .catch(err => console.log(err));\n  }\n}\n"],"names":["$c4ebbd28ee7007ee$export$57b7d3a597416aa2","breedId","fetch","then","resp","ok","Error","statusText","json","$85a5f86b715fe7db$var$refs","breedSelect","document","querySelector","catInfo","loader","error","$85a5f86b715fe7db$var$isFirstClick","$85a5f86b715fe7db$var$createMarkup","data","map","id","name","join","addEventListener","e","target","value","console","log","markup","url","innerHTML","catch","err","headers","textContent","insertAdjacentHTML"],"version":3,"file":"index.863eb67b.js.map"}