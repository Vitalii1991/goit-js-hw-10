{"mappings":"YAiBO,SAASA,EAAgBC,GAC9B,IAAMC,EAAM,GAA8BC,OAjBtB,6CAiBS,eAAqBA,OAARF,GAE1C,OAAOG,MAAMF,GAAKG,MAAK,SAAAC,GACrB,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAGvB,OAAOH,EAAKI,M,ICtBhB,IAAMC,EAAO,CACXC,YAAaC,SAASC,cAAc,iBACpCC,QAASF,SAASC,cAAc,aAChCE,OAAQH,SAASC,cAAc,WAC/BG,MAAOJ,SAASC,cAAc,WAG5BI,GAAe,EAmBnB,SAASC,EAAaC,GACpB,OAAOA,EACJC,KAAI,SAAAC,G,IAAGC,EAAED,EAAFC,GAAIC,EAAIF,EAAJE,KACV,MAAO,iBAAuBrB,OAANoB,EAAG,KAAQpB,OAALqB,EAAK,Y,IAEpCC,KAAK,G,CAtBVd,EAAKC,YAAYc,iBAAiB,SAyBlC,WACER,GAAe,C,IAzBjBP,EAAKC,YAAYc,iBAAiB,UA4BlC,SAAuBC,GACrB,IAAKT,EAAc,CAGjBlB,EAFgB2B,EAAEC,OAAOC,OAGtBxB,MAAK,SAAAe,GACJU,QAAQC,IAAIX,GAEZ,IAAMY,EAAaZ,EAAK,GAAGa,IACrBC,EAAS,aAAwB/B,OAAX6B,EAAW,uBAEvCrB,EAAKI,QAAQoB,UAAYD,C,IAE1BE,OAAM,SAAAC,G,OAAOP,QAAQC,IAAIM,E,QDhDvBjC,MANQ,sCAMQ,CACrBkC,QAAS,CAAE,YAJb,2EAKGjC,MAAK,SAAAC,GACN,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAGvB,OAAOH,EAAKI,M,ICGbL,MAAK,SAAAe,GACJU,QAAQC,IAAIX,GAERA,IACFT,EAAKK,OAAOuB,YAAc,GAC1B5B,EAAKM,MAAMsB,YAAc,GAEzBpB,EAAaC,GACbT,EAAKC,YAAY4B,mBAAmB,YAAarB,EAAaC,I,IAGjEgB,OAAM,SAAAC,G,OAAOP,QAAQC,IAAIM,E","sources":["src/js/cat-api.js","src/js/index.js"],"sourcesContent":["const BASE_URL = 'https://api.thecatapi.com/v1/breeds';\nconst FULL_INFO_URL = 'https://api.thecatapi.com/v1/images/search';\nconst API_KEY =\n  'live_h4rXP6k712FItPzlv4CzVENgeHJjXm6PhC2qqHs9ALeUyqOD7G0DJszHUDH4miQN';\n\nexport function fetchBreeds() {\n  return fetch(BASE_URL, {\n    headers: { 'x-api-key': API_KEY },\n  }).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n\nexport function fetchCatByBreed(breedId) {\n  const URL = `${FULL_INFO_URL}?breed_ids=${breedId}`;\n\n  return fetch(URL).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n","import { fetchBreeds } from './cat-api';\nimport { fetchCatByBreed } from './cat-api';\n\nconst refs = {\n  breedSelect: document.querySelector('.breed-select'),\n  catInfo: document.querySelector('.cat-info'),\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n};\n\nlet isFirstClick = true;\n\nrefs.breedSelect.addEventListener('click', onClickBreedSelect);\nrefs.breedSelect.addEventListener('change', onSelectBreed);\n\nfetchBreeds()\n  .then(data => {\n    console.log(data);\n\n    if (data) {\n      refs.loader.textContent = '';\n      refs.error.textContent = '';\n\n      createMarkup(data);\n      refs.breedSelect.insertAdjacentHTML('beforeend', createMarkup(data));\n    }\n  })\n  .catch(err => console.log(err));\n\nfunction createMarkup(data) {\n  return data\n    .map(({ id, name }) => {\n      return `<option value=${id}>${name}</option>`;\n    })\n    .join('');\n}\n\nfunction onClickBreedSelect() {\n  isFirstClick = false;\n}\n\nfunction onSelectBreed(e) {\n  if (!isFirstClick) {\n    const breedId = e.target.value;\n\n    fetchCatByBreed(breedId)\n      .then(data => {\n        console.log(data);\n\n        const urlPicture = data[0].url;\n        const markup = `<img src=\"${urlPicture}\" alt=\"cat\"\"></img>`;\n\n        refs.catInfo.innerHTML = markup;\n      })\n      .catch(err => console.log(err));\n  }\n}\n"],"names":["$8994e83c1b13b9e2$export$57b7d3a597416aa2","breedId","URL","concat","fetch","then","resp","ok","Error","statusText","json","$44ae6d9db4eaca0f$var$refs","breedSelect","document","querySelector","catInfo","loader","error","$44ae6d9db4eaca0f$var$isFirstClick","$44ae6d9db4eaca0f$var$createMarkup","data","map","param","id","name","join","addEventListener","e","target","value","console","log","urlPicture","url","markup","innerHTML","catch","err","headers","textContent","insertAdjacentHTML"],"version":3,"file":"index.8939d931.js.map"}